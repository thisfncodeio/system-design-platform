<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 460" font-family="'Segoe UI', Arial, sans-serif">

  <!-- Background -->
  <rect width="800" height="460" fill="#f8f9ff" rx="16"/>

  <!-- Title -->
  <text x="400" y="36" text-anchor="middle" font-size="20" font-weight="bold" fill="#1a1a2e">Cardinality â€” When Does an Index Actually Help?</text>
  <text x="400" y="56" text-anchor="middle" font-size="12" fill="#888">Cardinality = the number of distinct values in a column. It determines whether an index is worth adding.</text>

  <!-- ====== LEFT: High Cardinality ====== -->
  <rect x="30" y="75" width="355" height="350" fill="#f0fff4" rx="12" stroke="#b3f0c8" stroke-width="2"/>
  <text x="207" y="103" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a7a3c">âœ… High Cardinality</text>
  <text x="207" y="121" text-anchor="middle" font-size="12" fill="#555">orders.user_id â€” 1,000 distinct values</text>

  <!-- Column values -->
  <rect x="50" y="133" width="160" height="24" fill="#d4edda" rx="4" stroke="#8fd6a8" stroke-width="1"/>
  <text x="130" y="149" text-anchor="middle" font-size="11" fill="#333">user_id = 1</text>

  <rect x="50" y="163" width="160" height="24" fill="#d4edda" rx="4" stroke="#8fd6a8" stroke-width="1"/>
  <text x="130" y="179" text-anchor="middle" font-size="11" fill="#333">user_id = 2</text>

  <rect x="50" y="193" width="160" height="24" fill="#d4edda" rx="4" stroke="#8fd6a8" stroke-width="1"/>
  <text x="130" y="209" text-anchor="middle" font-size="11" fill="#333">user_id = 3</text>

  <text x="130" y="238" text-anchor="middle" font-size="16" fill="#1a7a3c">â‹®</text>
  <text x="130" y="258" text-anchor="middle" font-size="11" fill="#888">997 more unique values...</text>

  <!-- Index benefit explanation -->
  <rect x="50" y="272" width="315" height="60" fill="#b3f0c8" rx="6"/>
  <text x="207" y="291" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a7a3c">When you query WHERE user_id = 5:</text>
  <text x="207" y="308" text-anchor="middle" font-size="11" fill="#1a7a3c">Only ~100 out of 100,000 rows match.</text>
  <text x="207" y="323" text-anchor="middle" font-size="11" fill="#1a7a3c">Index jumps directly there. Huge win. ğŸš€</text>

  <!-- Row count visual -->
  <rect x="50" y="345" width="315" height="24" fill="#d4edda" rx="4"/>
  <rect x="50" y="345" width="10" height="24" fill="#4caf50" rx="4"/>
  <text x="207" y="361" text-anchor="middle" font-size="10" fill="#1a7a3c">~0.1% of rows match â€” index is very selective</text>

  <rect x="50" y="378" width="315" height="36" fill="#8fd6a8" rx="6"/>
  <text x="207" y="393" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a7a3c">âœ… Add an index. It will be used.</text>
  <text x="207" y="408" text-anchor="middle" font-size="11" fill="#1a7a3c">Examples: user_id, email, product_id, order_id</text>

  <!-- ====== RIGHT: Low Cardinality ====== -->
  <rect x="415" y="75" width="355" height="350" fill="#fff0f0" rx="12" stroke="#ffcccc" stroke-width="2"/>
  <text x="592" y="103" text-anchor="middle" font-size="15" font-weight="bold" fill="#cc3333">âš ï¸ Low Cardinality</text>
  <text x="592" y="121" text-anchor="middle" font-size="12" fill="#555">orders.status â€” only 5 distinct values</text>

  <!-- Column values -->
  <rect x="435" y="133" width="315" height="24" fill="#ffdddd" rx="4" stroke="#ffaaaa" stroke-width="1"/>
  <text x="592" y="149" text-anchor="middle" font-size="11" fill="#333">status = 'pending'       ~5,000 rows</text>

  <rect x="435" y="163" width="315" height="24" fill="#ffdddd" rx="4" stroke="#ffaaaa" stroke-width="1"/>
  <text x="592" y="179" text-anchor="middle" font-size="11" fill="#333">status = 'processing'    ~5,000 rows</text>

  <rect x="435" y="193" width="315" height="24" fill="#ffdddd" rx="4" stroke="#ffaaaa" stroke-width="1"/>
  <text x="592" y="209" text-anchor="middle" font-size="11" fill="#333">status = 'shipped'       ~5,000 rows</text>

  <rect x="435" y="223" width="315" height="24" fill="#ffdddd" rx="4" stroke="#ffaaaa" stroke-width="1"/>
  <text x="592" y="239" text-anchor="middle" font-size="11" fill="#333">status = 'delivered'     ~70,000 rows</text>

  <rect x="435" y="253" width="315" height="24" fill="#ffdddd" rx="4" stroke="#ffaaaa" stroke-width="1"/>
  <text x="592" y="269" text-anchor="middle" font-size="11" fill="#333">status = 'cancelled'     ~15,000 rows</text>

  <!-- Index problem explanation -->
  <rect x="435" y="290" width="315" height="60" fill="#ffb3b3" rx="6"/>
  <text x="592" y="309" text-anchor="middle" font-size="11" font-weight="bold" fill="#cc3333">When you query WHERE status = 'delivered':</text>
  <text x="592" y="326" text-anchor="middle" font-size="11" fill="#cc3333">70,000 out of 100,000 rows match.</text>
  <text x="592" y="341" text-anchor="middle" font-size="11" fill="#cc3333">PostgreSQL skips the index â€” scan is faster. ğŸ¤·</text>

  <!-- Row count visual -->
  <rect x="435" y="362" width="315" height="24" fill="#ffdddd" rx="4"/>
  <rect x="435" y="362" width="222" height="24" fill="#ff8080" rx="4"/>
  <text x="592" y="378" text-anchor="middle" font-size="10" fill="#cc0000">~70% of rows match â€” index is not selective</text>

  <rect x="435" y="395" width="315" height="24" fill="#ffb3b3" rx="6"/>
  <text x="592" y="411" text-anchor="middle" font-size="11" font-weight="bold" fill="#cc0000">âš ï¸ Don't add an index. PostgreSQL won't use it.</text>

  <!-- Bottom rule -->
  <rect x="30" y="435" width="740" height="18" fill="#e8f4fd" rx="5"/>
  <text x="400" y="448" text-anchor="middle" font-size="11" fill="#1a5276">Rule of thumb: the more unique values a column has, the more an index helps. Always verify with EXPLAIN ANALYZE.</text>

</svg>
