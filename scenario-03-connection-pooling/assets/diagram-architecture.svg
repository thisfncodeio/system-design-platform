<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 420" font-family="'Segoe UI', Arial, sans-serif">

  <!-- Background -->
  <rect width="800" height="420" fill="#f8f9ff" rx="16"/>

  <!-- Title -->
  <text x="400" y="38" text-anchor="middle" font-size="20" font-weight="bold" fill="#1a1a2e">The System You're Working With</text>

  <defs>
    <marker id="blue-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#90b4f5"/>
    </marker>
    <marker id="green-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#4caf50"/>
    </marker>
    <marker id="orange-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#e67e22"/>
    </marker>
  </defs>

  <!-- ====== SERVICES (submitters) ====== -->
  <text x="72" y="85" text-anchor="middle" font-size="13" font-weight="bold" fill="#555">Services</text>
  <text x="72" y="100" text-anchor="middle" font-size="10" fill="#888">submitting jobs</text>

  <rect x="20" y="112" width="104" height="26" fill="#dce8ff" stroke="#90b4f5" stroke-width="1.5" rx="6"/>
  <text x="72" y="129" text-anchor="middle" font-size="11" fill="#333">ğŸ“§ Email Service</text>

  <rect x="20" y="145" width="104" height="26" fill="#dce8ff" stroke="#90b4f5" stroke-width="1.5" rx="6"/>
  <text x="72" y="162" text-anchor="middle" font-size="11" fill="#333">ğŸ–¼ï¸ Image Service</text>

  <rect x="20" y="178" width="104" height="26" fill="#dce8ff" stroke="#90b4f5" stroke-width="1.5" rx="6"/>
  <text x="72" y="195" text-anchor="middle" font-size="11" fill="#333">ğŸ“Š Report Service</text>

  <text x="72" y="220" text-anchor="middle" font-size="12" fill="#90b4f5">â‹®</text>
  <text x="72" y="238" text-anchor="middle" font-size="10" fill="#888">50 concurrent</text>
  <text x="72" y="251" text-anchor="middle" font-size="10" fill="#888">POST /jobs</text>

  <!-- Arrows: services to server -->
  <line x1="126" y1="125" x2="218" y2="175" stroke="#90b4f5" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#blue-arrow)"/>
  <line x1="126" y1="158" x2="218" y2="195" stroke="#90b4f5" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#blue-arrow)"/>
  <line x1="126" y1="191" x2="218" y2="215" stroke="#90b4f5" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#blue-arrow)"/>

  <!-- ====== SERVER ====== -->
  <rect x="220" y="110" width="200" height="210" fill="#fff9e6" rx="12" stroke="#ffd700" stroke-width="2.5"/>
  <text x="320" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#b8860b">ğŸ–¥ï¸ Job Queue API</text>
  <text x="320" y="152" text-anchor="middle" font-size="11" fill="#888">Node.js + Express</text>

  <!-- Routes -->
  <rect x="236" y="160" width="168" height="24" fill="#fff3cd" rx="5" stroke="#ffc107" stroke-width="1"/>
  <text x="320" y="176" text-anchor="middle" font-size="11" fill="#555">POST /jobs</text>

  <rect x="236" y="190" width="168" height="24" fill="#fff3cd" rx="5" stroke="#ffc107" stroke-width="1"/>
  <text x="320" y="206" text-anchor="middle" font-size="11" fill="#555">GET /jobs/next</text>

  <rect x="236" y="220" width="168" height="24" fill="#fff3cd" rx="5" stroke="#ffc107" stroke-width="1"/>
  <text x="320" y="236" text-anchor="middle" font-size="11" fill="#555">GET /jobs/stats</text>

  <!-- Pool config callout -->
  <rect x="236" y="252" width="168" height="58" fill="#ffdddd" rx="5"/>
  <text x="320" y="268" text-anchor="middle" font-size="9" font-weight="bold" fill="#cc3333">âš ï¸ Pool config</text>
  <text x="320" y="282" text-anchor="middle" font-size="9" fill="#cc3333">max: 3 connections</text>
  <text x="320" y="296" text-anchor="middle" font-size="9" fill="#cc3333">connectionTimeout: 200ms</text>
  <text x="320" y="310" text-anchor="middle" font-size="9" fill="#cc3333">50 concurrent requests arrive...</text>

  <!-- Arrow: server to db -->
  <line x1="422" y1="215" x2="492" y2="215" stroke="#4caf50" stroke-width="2.5" marker-end="url(#green-arrow)"/>
  <text x="457" y="207" text-anchor="middle" font-size="10" fill="#4caf50">query</text>

  <!-- ====== DATABASE ====== -->
  <rect x="494" y="110" width="190" height="210" fill="#f0fff4" rx="12" stroke="#4caf50" stroke-width="2.5"/>
  <text x="589" y="136" text-anchor="middle" font-size="13" font-weight="bold" fill="#1a7a3c">ğŸ—„ï¸ Database</text>
  <text x="589" y="152" text-anchor="middle" font-size="11" fill="#888">PostgreSQL</text>

  <rect x="510" y="162" width="158" height="46" fill="#d4edda" rx="5" stroke="#8fd6a8" stroke-width="1"/>
  <text x="589" y="179" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a7a3c">jobs table</text>
  <text x="589" y="195" text-anchor="middle" font-size="10" fill="#555">id, type, payload,</text>
  <text x="589" y="208" text-anchor="middle" font-size="10" fill="#555">status, priority</text>

  <rect x="510" y="214" width="158" height="36" fill="#d4edda" rx="5" stroke="#8fd6a8" stroke-width="1"/>
  <text x="589" y="230" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a7a3c">workers table</text>
  <text x="589" y="244" text-anchor="middle" font-size="10" fill="#555">id, name, jobs_processed</text>

  <rect x="510" y="258" width="158" height="52" fill="#fff3cd" rx="5" stroke="#ffc107" stroke-width="1"/>
  <text x="589" y="274" text-anchor="middle" font-size="9" font-weight="bold" fill="#b8860b">âš ï¸ PostgreSQL limit</text>
  <text x="589" y="288" text-anchor="middle" font-size="9" fill="#666">max_connections = 100</text>
  <text x="589" y="302" text-anchor="middle" font-size="9" fill="#666">total across ALL clients</text>

  <!-- ====== WORKERS ====== -->
  <text x="728" y="85" text-anchor="middle" font-size="13" font-weight="bold" fill="#555">Workers</text>
  <text x="728" y="100" text-anchor="middle" font-size="10" fill="#888">claiming jobs</text>

  <rect x="686" y="112" width="84" height="26" fill="#e8d5ff" stroke="#9b59b6" stroke-width="1.5" rx="6"/>
  <text x="728" y="129" text-anchor="middle" font-size="11" fill="#333">âš™ï¸ worker-01</text>

  <rect x="686" y="145" width="84" height="26" fill="#e8d5ff" stroke="#9b59b6" stroke-width="1.5" rx="6"/>
  <text x="728" y="162" text-anchor="middle" font-size="11" fill="#333">âš™ï¸ worker-02</text>

  <rect x="686" y="178" width="84" height="26" fill="#e8d5ff" stroke="#9b59b6" stroke-width="1.5" rx="6"/>
  <text x="728" y="195" text-anchor="middle" font-size="11" fill="#333">âš™ï¸ worker-03</text>

  <text x="728" y="220" text-anchor="middle" font-size="12" fill="#9b59b6">â‹®</text>

  <!-- Arrows: workers to server -->
  <line x1="684" y1="125" x2="422" y2="175" stroke="#9b59b6" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#orange-arrow)"/>
  <line x1="684" y1="158" x2="422" y2="200" stroke="#9b59b6" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#orange-arrow)"/>
  <line x1="684" y1="191" x2="422" y2="222" stroke="#9b59b6" stroke-width="1.8" stroke-dasharray="5,3" marker-end="url(#orange-arrow)"/>

  <!-- Bottom bar -->
  <rect x="30" y="342" width="740" height="42" fill="#e8f4fd" rx="6"/>
  <text x="400" y="359" text-anchor="middle" font-size="11" fill="#1a5276">Services submit jobs. Workers claim and process them. Both hit the same API simultaneously.</text>
  <text x="400" y="376" text-anchor="middle" font-size="11" fill="#cc3333">The pool has 3 connections. 50 requests arrive at once. You can probably guess what happens.</text>

</svg>
