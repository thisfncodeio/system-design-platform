<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 557" font-family="'Segoe UI', Arial, sans-serif">

  <defs>
    <marker id="garrow2" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1a7a3c"/>
    </marker>

  </defs>

  <!-- Background -->
  <rect width="820" height="557" fill="#f8f9ff" rx="16"/>

  <!-- Title -->
  <text x="410" y="38" text-anchor="middle" font-size="20" font-weight="bold" fill="#1a1a2e">What is a Connection Pool?</text>
  <text x="410" y="58" text-anchor="middle" font-size="12" fill="#888">Opening a database connection costs ~50ms. That adds up fast under load.</text>

  <!-- ====== LEFT: No Pool ====== -->
  <rect x="30" y="75" width="320" height="355" fill="#fff0f0" rx="12" stroke="#ffcccc" stroke-width="2"/>
  <text x="190" y="103" text-anchor="middle" font-size="15" font-weight="bold" fill="#cc3333">âŒ Without a Pool</text>
  <text x="190" y="121" text-anchor="middle" font-size="11" fill="#888">Every request from every user opens its own connection</text>

  <!-- Requests (left) -->
  <rect x="48" y="135" width="118" height="28" fill="#ffdddd" rx="6" stroke="#ffaaaa" stroke-width="1.5"/>
  <text x="107" y="153" text-anchor="middle" font-size="11" fill="#333">User 1's request</text>

  <rect x="48" y="171" width="118" height="28" fill="#ffdddd" rx="6" stroke="#ffaaaa" stroke-width="1.5"/>
  <text x="107" y="189" text-anchor="middle" font-size="11" fill="#333">User 2's request</text>

  <rect x="48" y="207" width="118" height="28" fill="#ffdddd" rx="6" stroke="#ffaaaa" stroke-width="1.5"/>
  <text x="107" y="225" text-anchor="middle" font-size="11" fill="#333">User 3's request</text>

  <rect x="48" y="243" width="118" height="28" fill="#ffdddd" rx="6" stroke="#ffaaaa" stroke-width="1.5"/>
  <text x="107" y="261" text-anchor="middle" font-size="11" fill="#333">User 4's request</text>

  <text x="107" y="292" text-anchor="middle" font-size="14" fill="#cc3333">â‹®</text>
  <text x="107" y="310" text-anchor="middle" font-size="10" fill="#888">100 users =</text>
  <text x="107" y="324" text-anchor="middle" font-size="10" fill="#888">100 new connections</text>

  <!-- Cost labels (left) -->
  <text x="207" y="151" text-anchor="middle" font-size="10" fill="#cc3333">+50ms</text>
  <text x="207" y="187" text-anchor="middle" font-size="10" fill="#cc3333">+50ms</text>
  <text x="207" y="223" text-anchor="middle" font-size="10" fill="#cc3333">+50ms</text>
  <text x="207" y="259" text-anchor="middle" font-size="10" fill="#cc3333">+50ms</text>

  <!-- DB cylinder (left) -->
  <rect x="246" y="215" width="88" height="38" fill="#ffb3b3" stroke="#ff8080" stroke-width="2"/>
  <ellipse cx="290" cy="253" rx="44" ry="16" fill="#ffb3b3" stroke="none"/>
  <path d="M 246,253 A 44,16 0 0,0 334,253" fill="none" stroke="#ff8080" stroke-width="2"/>
  <ellipse cx="290" cy="215" rx="44" ry="16" fill="#ffb3b3" stroke="none"/>
  <path d="M 246,215 A 44,16 0 0,0 334,215" fill="none" stroke="#ff8080" stroke-width="2"/>
  <path d="M 246,215 A 44,16 0 0,1 334,215" fill="none" stroke="#ff8080" stroke-width="2"/>
  <text x="290" y="252" text-anchor="middle" font-size="12" font-weight="bold" fill="#cc0000">DB</text>

  <!-- Arrows (left) -->
  <line x1="168" y1="149" x2="248" y2="220" stroke="#cc3333" stroke-width="1.2" stroke-dasharray="4"/>
  <line x1="168" y1="185" x2="248" y2="228" stroke="#cc3333" stroke-width="1.2" stroke-dasharray="4"/>
  <line x1="168" y1="221" x2="248" y2="234" stroke="#cc3333" stroke-width="1.2" stroke-dasharray="4"/>
  <line x1="168" y1="257" x2="248" y2="242" stroke="#cc3333" stroke-width="1.2" stroke-dasharray="4"/>

  <!-- Summary (left) -->
  <rect x="48" y="340" width="284" height="78" fill="#ffb3b3" rx="6"/>
  <text x="190" y="358" text-anchor="middle" font-size="11" font-weight="bold" fill="#cc0000">What happens under load:</text>
  <text x="190" y="375" text-anchor="middle" font-size="11" fill="#cc0000">The DB has a max connection limit.</text>
  <text x="190" y="391" text-anchor="middle" font-size="11" fill="#cc0000">100 users all opening connections at once</text>
  <text x="190" y="407" text-anchor="middle" font-size="11" fill="#cc0000">= timeouts, failures, errors. ğŸ’¥</text>

  <!-- ====== RIGHT: With Pool ====== -->
  <rect x="400" y="75" width="390" height="462" fill="#f0fff4" rx="12" stroke="#b3f0c8" stroke-width="2"/>
  <text x="595" y="103" text-anchor="middle" font-size="15" font-weight="bold" fill="#1a7a3c">âœ… With a Pool</text>
  <text x="595" y="121" text-anchor="middle" font-size="11" fill="#888">Connections are opened once at startup and reused</text>

  <!-- Active requests (right) -->
  <rect x="415" y="138" width="118" height="28" fill="#d4edda" rx="6" stroke="#8fd6a8" stroke-width="1.5"/>
  <text x="474" y="156" text-anchor="middle" font-size="11" fill="#333">User 1's request</text>

  <rect x="415" y="172" width="118" height="28" fill="#d4edda" rx="6" stroke="#8fd6a8" stroke-width="1.5"/>
  <text x="474" y="190" text-anchor="middle" font-size="11" fill="#333">User 2's request</text>

  <rect x="415" y="206" width="118" height="28" fill="#d4edda" rx="6" stroke="#8fd6a8" stroke-width="1.5"/>
  <text x="474" y="224" text-anchor="middle" font-size="11" fill="#333">User 3's request</text>

  <rect x="415" y="240" width="118" height="28" fill="#d4edda" rx="6" stroke="#8fd6a8" stroke-width="1.5"/>
  <text x="474" y="258" text-anchor="middle" font-size="11" fill="#333">User 4's request</text>

  <!-- Pool box (all connections in use) -->
  <rect x="556" y="130" width="104" height="165" fill="#fff3e0" rx="8" stroke="#ff9800" stroke-width="2"/>
  <text x="608" y="151" text-anchor="middle" font-size="11" font-weight="bold" fill="#e65100">ğŸŠ Pool</text>
  <text x="608" y="166" text-anchor="middle" font-size="9" fill="#888">all 4 slots busy</text>

  <rect x="564" y="172" width="88" height="22" fill="#ffb74d" rx="4"/>
  <text x="608" y="187" text-anchor="middle" font-size="10" fill="#5d3200">Conn in use ğŸ”’</text>

  <rect x="564" y="200" width="88" height="22" fill="#ffb74d" rx="4"/>
  <text x="608" y="215" text-anchor="middle" font-size="10" fill="#5d3200">Conn in use ğŸ”’</text>

  <rect x="564" y="228" width="88" height="22" fill="#ffb74d" rx="4"/>
  <text x="608" y="243" text-anchor="middle" font-size="10" fill="#5d3200">Conn in use ğŸ”’</text>

  <rect x="564" y="256" width="88" height="22" fill="#ffb74d" rx="4"/>
  <text x="608" y="271" text-anchor="middle" font-size="10" fill="#5d3200">Conn in use ğŸ”’</text>

  <!-- Arrows from active requests to pool -->
  <line x1="535" y1="152" x2="556" y2="183" stroke="#1a7a3c" stroke-width="1.5" stroke-dasharray="4"/>
  <line x1="535" y1="186" x2="556" y2="211" stroke="#1a7a3c" stroke-width="1.5" stroke-dasharray="4"/>
  <line x1="535" y1="220" x2="556" y2="239" stroke="#1a7a3c" stroke-width="1.5" stroke-dasharray="4"/>
  <line x1="535" y1="254" x2="556" y2="267" stroke="#1a7a3c" stroke-width="1.5" stroke-dasharray="4"/>

  <!-- DB cylinder (right) -->
  <rect x="700" y="242" width="64" height="28" fill="#b3f0c8" stroke="#4caf50" stroke-width="2"/>
  <ellipse cx="732" cy="270" rx="32" ry="12" fill="#b3f0c8" stroke="none"/>
  <path d="M 700,270 A 32,12 0 0,0 764,270" fill="none" stroke="#4caf50" stroke-width="2"/>
  <ellipse cx="732" cy="242" rx="32" ry="12" fill="#b3f0c8" stroke="none"/>
  <path d="M 700,242 A 32,12 0 0,0 764,242" fill="none" stroke="#4caf50" stroke-width="2"/>
  <path d="M 700,242 A 32,12 0 0,1 764,242" fill="none" stroke="#4caf50" stroke-width="2"/>
  <text x="732" y="269" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a7a3c">DB</text>

  <line x1="661" y1="256" x2="697" y2="256" stroke="#1a7a3c" stroke-width="2" marker-end="url(#garrow2)"/>
  <text x="679" y="248" text-anchor="middle" font-size="9" fill="#1a7a3c">shared</text>

  <!-- â”€â”€ Waiting Queue section â”€â”€ -->
  <!-- Dashed separator -->
  <line x1="410" y1="302" x2="785" y2="302" stroke="#ffcc80" stroke-width="1.5" stroke-dasharray="5,3"/>

  <!-- Queue label -->
  <text x="418" y="320" font-size="11" font-weight="bold" fill="#e65100">â³ Waiting Queue</text>
  <text x="418" y="335" font-size="9" fill="#555">pool is full â€” these requests wait for a free slot</text>

  <!-- Waiting request boxes -->
  <rect x="415" y="348" width="118" height="28" fill="#fff3e0" rx="6" stroke="#ffb74d" stroke-width="1.8"/>
  <text x="474" y="366" text-anchor="middle" font-size="11" fill="#e65100">User 5's request</text>

  <rect x="415" y="386" width="118" height="28" fill="#fff3e0" rx="6" stroke="#ffb74d" stroke-width="1.8"/>
  <text x="474" y="404" text-anchor="middle" font-size="11" fill="#e65100">User 6's request</text>


  <!-- Summary (right) -->
  <rect x="415" y="428" width="360" height="100" fill="#8fd6a8" rx="6"/>
  <text x="595" y="448" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a7a3c">What happens under load:</text>
  <text x="595" y="465" text-anchor="middle" font-size="11" fill="#1a7a3c">Requests grab an available connection, use it,</text>
  <text x="595" y="481" text-anchor="middle" font-size="11" fill="#1a7a3c">and return it to the pool when done.</text>
  <text x="595" y="497" text-anchor="middle" font-size="11" fill="#1a7a3c">Extra requests wait in a queue â€” no crash! ğŸŸ¢</text>
  <text x="595" y="513" text-anchor="middle" font-size="11" fill="#1a7a3c">Controlled, predictable, no new connections.</text>

</svg>
